<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ch4.css"> 
    <title>점메추</title>
</head>
<body>
    <h1>점심 메뉴 추천</h1>
    <form id="result" method="get">
        <label for ="spicy">맵기 정도는?</label>
        <select name="spicy" id="spicy">
            <option value="0">안 매움</option>
            <option value="1">조금 매움</option>
            <option value="2">조금 더 매움</option>
            <option value="3">매움</option>
            <option value="4">많이 매움</option>
            <option value="5">더 많이 매움</option>
            <option value="6">못 먹을 정도로 매움</option>
            <option value="7">매우 매움</option>
        </select><br><br>

        <label for="price">예산</label>
        <input type="range" id="price" name="price" min="0" max="50000" step="1000" value="25000" oninput="this.nextElementSibling.value = this.value"><br>
        <output id="priceOutput">25000</output>원<br><br>
        
        <label>음식 종류</label><br><br>
        <input type="radio" id="type_korean" name="type" value="한식">
        <label for="type_korean">한식</label><br><br>
        <input type="radio" id="type_chinese" name="type" value="중식">
        <label for="type_chinese">중식</label><br><br>
        <input type="radio" id="type_japanese" name="type" value="일식">
        <label for="type_japanese">일식</label><br><br>
        <input type="radio" id="type_western" name="type" value="양식">
        <label for="type_western">양식</label><br><br>


        <label for="mood">오늘의 기분은 ?</label><br><br>
        <input type="text" id="mood" name="text" placeholder="기분을 입력하세요"><br><br><br><br>

        <input type="submit" value="추천 받기">
    </form>

    <script>
        //예산 레인지 조절
    const monInput = document.getElementById("price");
    const monOutput = document.getElementById("priceOutput");
    monInput.addEventListener('input', () => {
        monOutput.value = monInput.value;
    });
/* //어려워서 포기함
    async function fetchDate() {
        try {
            const res = await fetch("https://mockapi.io/clone/68b7ac6873b3ec66cec53580");
            const data = await res.json();
            console.log(data);

            if (data.length > 0) {
                return data[0].name;
             
            } else{
                return "메뉴없음";
            } 
        } catch (error) {
            console.error("Error fetching data:", error);
            return "에러";
        } 
        
    }*/
    //콘솔에 값 출력
    document.getElementById("result").addEventListener('submit', async e => { //서밋누름
	    e.preventDefault();//새로고침 방지
	    const spicy = document.getElementById('spicy').value;
        console.log("맵기 " + spicy);
        const price = document.getElementById('price').value;
        console.log("예산 " + price);
        const type = document.querySelector('input[name="type"]:checked')?.value || '선택 안 함';
        console.log("음식종류 " + type);
        const mood = document.getElementById('mood').value;
        console.log("기분 " + mood);

        //const menu = await fetchDate();

        alert(`점심메뉴는 이걸로 추천 : ${type} (맵기 ${spicy}, 예산 ${price}원, 기분: ${mood})`); //+ menu
    });

    </script>
</body>
</html>